Logfile for bbregister
Fri Aug  2 18:46:08 EDT 2024

setenv SUBJECTS_DIR /output
cd /output/sub-MTL0002/scripts
/opt/freesurfer/bin/bbregister --s sub-MTL0002 --mov /output/sub-MTL0002/mri/orig/FLAIRraw.mgz --lta /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.lta --init-coreg --T2 --gm-proj-abs 2 --wm-proj-abs 1 --no-coreg-ref-mask

bbregister 7.4.1
Linux bc11318.int.ets1.calculquebec.ca 4.18.0-553.8.1.el8_10.x86_64 #1 SMP Tue Jul 2 17:10:26 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /opt/freesurfer
mri_convert /output/sub-MTL0002/mri/orig/FLAIRraw.mgz /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii
mri_convert /output/sub-MTL0002/mri/orig/FLAIRraw.mgz /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii 
reading from /output/sub-MTL0002/mri/orig/FLAIRraw.mgz...
TR=5000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.999917, 0.00209183, -0.0127268)
j_ras = (-0.0027684, 0.998571, -0.0533777)
k_ras = (0.012597, 0.0534085, 0.998493)
writing to /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii...
mri_coreg --s sub-MTL0002 --mov /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii --regdat /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/reg.init.dat --reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/mri_coreg.lta --nthreads 36 --dof 6 --sep 4 --ftol .0001 --linmintol .01 --no-ref-mask

$Id: mri_coreg.c,v 1.27 2016/04/30 15:11:49 greve Exp $
cwd /output/sub-MTL0002/scripts
cmdline mri_coreg --s sub-MTL0002 --mov /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii --regdat /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/reg.init.dat --reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/mri_coreg.lta --nthreads 36 --dof 6 --sep 4 --ftol .0001 --linmintol .01 --no-ref-mask 
sysname  Linux
hostname bc11318.int.ets1.calculquebec.ca
machine  x86_64
user     dbasha
dof    6
nsep    1
cras0    1
ftol    0.000100
linmintol    0.010000
bf       1
bflim    30.000000
bfnsamp    30
SmoothRef 0
SatPct    99.990000
MovOOB 0
optschema 1
Seed 53
Reading in mov /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii
Reading in ref /output/sub-MTL0002/mri/brainmask.mgz
Setting cras translation parameters to align volume centers
Init matrix params -1.0262  1.3777  2.1292  0.0000  0.0000  0.0000  1.0000  1.0000  1.0000  0.0000  0.0000  0.0000 
Initial Matrix (RAS2RAS)
 1.00000   0.00000   0.00000   1.02624;
 0.00000   1.00000   0.00000  -1.37767;
 0.00000   0.00000   1.00000  -2.12925;
 0.00000   0.00000   0.00000   1.00000;
Initial parameters to be opt -1.0262  1.3777  2.1292  0.0000  0.0000  0.0000 
Creating random numbers for coordinate dithering
Performing intensity dithering
Performing intensity dithering on mov with computed dither
Separation list (1):  4   min = 4
DoSmoothing 1
DoCoordDither 1
DoIntensityDither 1
nitersmax 4
ftol 1.000e-04
linmintol 1.000e-02
SatPct 99.990000
Hist FWHM 7.000000 7.000000
nthreads 36
movsat = 304.0000
mov gstd 1.8914 1.8914 1.8914
Smoothing mov
refsat = 125.0000
ref gstd 1.8914 1.8914 1.8914
Smoothing ref
COREGpreproc() done
Testing if mov and target overlap
Init cost   -1.0267413193
nhits = 173931 out of 16777216, Percent Overlap:  66.3
Initial  RefRAS-to-MovRAS
 1.00000   0.00000   0.00000  -1.02624;
 0.00000   1.00000   0.00000   1.37767;
 0.00000   0.00000   1.00000   2.12925;
 0.00000   0.00000   0.00000   1.00000;
Initial  RefVox-to-MovVox
-0.99992   0.01273   0.00209   213.10002;
 0.00277   0.05338   0.99857  -6.97639;
-0.01260  -0.99849   0.05341   249.60445;
 0.00000   0.00000   0.00000   1.00000;
sep = 4 -----------------------------------
COREGoptBruteForce() 30 1 30
Turning on MovOOB for BruteForce Search
#BF# sep= 4 iter=0 lim=30.0 delta=2.00   0.97376  -0.62233  12.12925  -2.00000   0.00000   0.00000   -1.0321672
Turning  MovOOB back off after brute force search


---------------------------------
Init Powel Params dof = 6: 0.973763 -0.622330 12.129250 -2.000000 0.000000 0.000000 
Starting OpenPowel2(), sep = 4
InitialCost        -1.0354684591 
#@#  4  188  0.97376 -0.62233 12.12925 -2.00000 0.00000 0.00000   -1.0354685
fs_powell::minimize
  nparams 6
  maxfev 4
  ftol   0.000100
  linmin_xtol_   0.010000
  powell nthiter 0: fret = -1.035468
#@#  4  193  0.35573 -0.62233 12.12925 -2.00000 0.00000 0.00000   -1.0356455
#@#  4  195  0.46355 -0.62233 12.12925 -2.00000 0.00000 0.00000   -1.0356541
#@#  4  204  0.46355 -0.52037 12.12925 -2.00000 0.00000 0.00000   -1.0356593
#@#  4  211  0.46355 -0.50037 13.12925 -2.00000 0.00000 0.00000   -1.0360509
#@#  4  216  0.46355 -0.50037 13.02170 -2.00000 0.00000 0.00000   -1.0360568
#@#  4  225  0.46355 -0.50037 13.02170 -1.84999 0.00000 0.00000   -1.0360675
#@#  4  232  0.46355 -0.50037 13.02170 -1.83999 -0.61803 0.00000   -1.0361662
#@#  4  234  0.46355 -0.50037 13.02170 -1.83999 -0.50974 0.00000   -1.0361708
#@#  4  244  0.46355 -0.50037 13.02170 -1.83999 -0.52974 0.38197   -1.0362773
#@#  4  246  0.46355 -0.50037 13.02170 -1.83999 -0.52974 0.48430   -1.0362823
  powell nthiter 1: fret = -1.036282
#@#  4  258  0.59872 -0.50037 13.02170 -1.83999 -0.52974 0.47430   -1.0362983
#@#  4  267  0.60872 -0.59686 13.02170 -1.83999 -0.52974 0.47430   -1.0363027
#@#  4  268  0.60872 -0.58346 13.02170 -1.83999 -0.52974 0.47430   -1.0363028
#@#  4  277  0.60872 -0.57346 13.08438 -1.83999 -0.52974 0.47430   -1.0363061
#@#  4  278  0.60872 -0.57346 13.09750 -1.83999 -0.52974 0.47430   -1.0363063
#@#  4  287  0.60872 -0.57346 13.10750 -1.80749 -0.52974 0.47430   -1.0363067
#@#  4  298  0.60872 -0.57346 13.10750 -1.80749 -0.72658 0.47430   -1.0363256
#@#  4  307  0.60872 -0.57346 13.10750 -1.80749 -0.73658 0.50337   -1.0363259
#@#  4  308  0.60872 -0.57346 13.10750 -1.80749 -0.73658 0.49337   -1.0363261
Powell done niters total = 1
OptTimeSec  3.0 sec
OptTimeMin  0.05 min
nEvals 308
Final optimized parameters   0.60871667  -0.57345724  13.10749817  -1.80749059  -0.73657602   0.49337298 
Final matrix parameters  0.6087 -0.5735 13.1075 -1.8075 -0.7366  0.4934  1.0000  1.0000  1.0000  0.0000  0.0000  0.0000 
Final cost   -1.036326022425948
 

---------------------------------
Final  RefRAS-to-MovRAS
 0.99988   0.00861  -0.01286   0.60872;
-0.00901   0.99946  -0.03154  -0.57346;
 0.01258   0.03165   0.99942   13.10750;
 0.00000   0.00000   0.00000   1.00000;
Final  RefVox-to-MovVox
-0.99962   0.02564   0.01030   212.01834;
 0.01244   0.08480   0.99632  -14.50069;
-0.02467  -0.99607   0.08509   258.26849;
 0.00000   0.00000   0.00000   1.00000;
Final matrix parameters  0.6087 -0.5735 13.1075 -1.8075 -0.7366  0.4934  0.0000  0.0000  0.0000  0.0000  0.0000  0.0000 
Final opt parameters  0.6087 -0.5735 13.1075 -1.8075 -0.7366  0.4934 
nhits = 167476 out of 16777216, Percent Overlap:  63.9
mri_coreg RunTimeSec 32.4 sec
To check run:
   tkregisterfv --mov /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii --targ /output/sub-MTL0002/mri/brainmask.mgz --reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/mri_coreg.lta --s sub-MTL0002 --surfs 

mri_coreg done

mri_segreg --mov /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii --init-reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/reg.init.dat --out-reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-abs 2 --gm-gt-wm 0.5
7.4.1
setenv SUBJECTS_DIR /output
cd /output/sub-MTL0002/scripts
mri_segreg --mov /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii --init-reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/reg.init.dat --out-reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-abs 2 --gm-gt-wm 0.5 
sysname  Linux
hostname bc11318.int.ets1.calculquebec.ca
machine  x86_64
user     dbasha
movvol /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii
regfile /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/reg.init.dat
subject sub-MTL0002
dof 6
outregfile /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjAbs 2.000000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1723400226
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99962  -0.01030   0.02564  -0.66715;
 0.02467   0.08509   0.99607   10.50553;
 0.01244  -0.99632   0.08480   2.52455;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
ExcludeZeroVoxels 1
Reading in targ vol /output/sub-MTL0002/mri/orig.mgz
Projecting LH Surfs
Loading lh.white surf
GM Proj: 0 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.017583
 1  -25.0 -25.0  25.0   1.029582
 2  -25.0  25.0 -25.0   1.036518
 3  -25.0  25.0  25.0   0.994154
 4   25.0 -25.0 -25.0   0.971168
 5   25.0 -25.0  25.0   1.064745
 6   25.0  25.0 -25.0   0.987122
 7   25.0  25.0  25.0   0.995506
REL:  8  0.663563    8.096378  1.012047 rel = 0.655664 
Initial costs ----------------
Number of surface hits 2487
WM  Intensity   124.0906 +/-  17.1458
Ctx Intensity   128.2494 +/-  30.9967
Pct Contrast      0.8945 +/-  25.5502
Cost   0.6636
RelCost   0.6557

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      1.0594   1.0594  0.0
     1  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000   0.0000      1.0349   1.0349  0.0
     3  -4.0000  -4.0000  -4.0000  -4.0000   0.0000  -4.0000      1.0131   1.0131  0.0
     4  -4.0000  -4.0000  -4.0000  -4.0000   0.0000   0.0000      0.9891   0.9891  0.0
    93  -4.0000   0.0000  -4.0000   0.0000   0.0000  -4.0000      0.9709   0.9709  0.0
   151  -4.0000   0.0000   4.0000   0.0000   4.0000   0.0000      0.9664   0.9664  0.0
   189  -4.0000   4.0000   0.0000  -4.0000  -4.0000  -4.0000      0.9590   0.9590  0.0
   334   0.0000   0.0000  -4.0000   0.0000  -4.0000   0.0000      0.8998   0.8998  0.0
   346   0.0000   0.0000  -4.0000   4.0000   0.0000   0.0000      0.8856   0.8856  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.6636   0.6636  0.0
Brute Force --------------------------
Min cost was 0.663563
Number of iterations   729
Search time 1.517209 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.663563
   7 -0.115  0.000  0.000  0.000  0.000  0.000   0.6578860069
  10 -0.099  0.000  0.000  0.000  0.000  0.000   0.6572487534
  12 -0.085  0.000  0.000  0.000  0.000  0.000   0.6569896930
  13 -0.084  0.000  0.000  0.000  0.000  0.000   0.6569879095
  24 -0.084  0.016  0.000  0.000  0.000  0.000   0.6566172761
  26 -0.084  0.014  0.000  0.000  0.000  0.000   0.6566071839
  37 -0.084  0.014 -0.044  0.000  0.000  0.000   0.6550619257
  38 -0.084  0.014 -0.064  0.000  0.000  0.000   0.6548640124
  39 -0.084  0.014 -0.067  0.000  0.000  0.000   0.6548588563
  40 -0.084  0.014 -0.068  0.000  0.000  0.000   0.6548577247
  51 -0.084  0.014 -0.068  0.021  0.000  0.000   0.6538962098
  52 -0.084  0.014 -0.068  0.026  0.000  0.000   0.6538123242
  53 -0.084  0.014 -0.068  0.031  0.000  0.000   0.6538039249
  54 -0.084  0.014 -0.068  0.029  0.000  0.000   0.6537947569
  65 -0.084  0.014 -0.068  0.029 -0.015  0.000   0.6536969694
  66 -0.084  0.014 -0.068  0.029 -0.013  0.000   0.6536930309
  67 -0.084  0.014 -0.068  0.029 -0.012  0.000   0.6536921125
  68 -0.084  0.014 -0.068  0.029 -0.011  0.000   0.6536900704
  80 -0.084  0.014 -0.068  0.029 -0.011 -0.015   0.6534945240
  81 -0.084  0.014 -0.068  0.029 -0.011 -0.016   0.6534899284
  83 -0.084  0.014 -0.068  0.029 -0.011 -0.018   0.6534825313
  84 -0.084  0.014 -0.068  0.029 -0.011 -0.019   0.6534802325
  powell nthiter 1: fret = 0.653480
  97 -0.081  0.014 -0.068  0.029 -0.011 -0.019   0.6534656494
 109 -0.081  0.009 -0.068  0.029 -0.011 -0.019   0.6534370160
 111 -0.081  0.010 -0.068  0.029 -0.011 -0.019   0.6534367944
 121 -0.081  0.010 -0.098  0.029 -0.011 -0.019   0.6532527966
 123 -0.081  0.010 -0.086  0.029 -0.011 -0.019   0.6531285993
 134 -0.081  0.010 -0.086  0.033 -0.011 -0.019   0.6530561934
 137 -0.081  0.010 -0.086  0.037 -0.011 -0.019   0.6530267884
 149 -0.081  0.010 -0.086  0.037 -0.013 -0.019   0.6530173580
 150 -0.081  0.010 -0.086  0.037 -0.014 -0.019   0.6530148023
 151 -0.081  0.010 -0.086  0.037 -0.016 -0.019   0.6530131330
 166 -0.077  0.006 -0.104  0.045 -0.020 -0.019   0.6529498659
 172 -0.078  0.007 -0.097  0.042 -0.018 -0.019   0.6529271855
 174 -0.078  0.007 -0.097  0.042 -0.018 -0.019   0.6529266845
 179 -0.078  0.007 -0.097  0.042 -0.018 -0.019   0.6529266690
  powell nthiter 2: fret = 0.652927
 201 -0.078  0.008 -0.097  0.042 -0.018 -0.019   0.6529259339
 214 -0.078  0.008 -0.097  0.042 -0.018 -0.020   0.6529252536
 224 -0.078  0.008 -0.097  0.043 -0.018 -0.020   0.6529226705
 225 -0.078  0.008 -0.097  0.044 -0.018 -0.020   0.6529226611
 235 -0.078  0.008 -0.097  0.044 -0.019 -0.020   0.6529159752
 237 -0.078  0.008 -0.097  0.044 -0.021 -0.020   0.6529153939
 244 -0.078  0.008 -0.100  0.045 -0.021 -0.020   0.6529130977
 248 -0.078  0.008 -0.100  0.045 -0.021 -0.020   0.6529129067
Powell done niters = 2
Computing relative cost
 0  -25.0 -25.0 -25.0   1.022094
 1  -25.0 -25.0  25.0   1.016670
 2  -25.0  25.0 -25.0   1.040134
 3  -25.0  25.0  25.0   0.986425
 4   25.0 -25.0 -25.0   0.977174
 5   25.0 -25.0  25.0   1.068745
 6   25.0  25.0 -25.0   0.989346
 7   25.0  25.0  25.0   0.995348
REL:  8  0.652913    8.095936  1.011992 rel = 0.645176 
Number of iterations     2
Min cost was 0.652913
Number of FunctionCalls   252
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 0.520231 sec
Parameters at optimum (transmm) -0.07794  0.00785 -0.09993
Parameters at optimum (rotdeg)  0.04493 -0.02135 -0.02002 
Final costs ----------------
Number of surface hits 2487
WM  Intensity   124.1341 +/-  17.1499
Ctx Intensity   128.3432 +/-  30.9961
Pct Contrast      0.9143 +/-  25.7416
Cost   0.6529
RelCost   0.6557
Reg at min cost was 
-0.99961  -0.00990   0.02596  -0.74237;
 0.02501   0.08588   0.99599   10.51163;
 0.01209  -0.99626   0.08560   2.43261;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/bbr.pass1.dat, type = 14 
Original Reg 
-0.99962  -0.01030   0.02564  -0.66715;
 0.02467   0.08509   0.99607   10.50553;
 0.01244  -0.99632   0.08480   2.52455;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00000  -0.00040  -0.00032   0.07521;
-0.00034  -0.00078   0.00008  -0.00610;
 0.00035  -0.00006  -0.00079   0.09194;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.112368
Computing change in rh position
Surface-RMS-Diff-mm 0.117371 0.026895 0.180143
mri_segreg done
mri_segreg --mov /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii --init-reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/bbr.pass1.dat --out-reg /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat --interp trilinear --wm-proj-abs 1 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat.mincost --dof 6 --nmax 36 --param /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/reg.curopt.dat --gm-proj-abs 2 --nsub 1 --gm-gt-wm 0.5
7.4.1
setenv SUBJECTS_DIR /output
cd /output/sub-MTL0002/scripts
mri_segreg --mov /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii --init-reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/bbr.pass1.dat --out-reg /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat --interp trilinear --wm-proj-abs 1 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat.mincost --dof 6 --nmax 36 --param /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/reg.curopt.dat --gm-proj-abs 2 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname bc11318.int.ets1.calculquebec.ca
machine  x86_64
user     dbasha
movvol /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/template.nii
regfile /output/sub-MTL0002/mri/transforms/tmp.bbregister.3842661/bbr.pass1.dat
subject sub-MTL0002
dof 6
outregfile /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjAbs 2.000000
WMProjAbs 1.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1722792851
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99961  -0.00990   0.02596  -0.74237;
 0.02501   0.08588   0.99599   10.51163;
 0.01209  -0.99626   0.08560   2.43261;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
ExcludeZeroVoxels 1
Reading in targ vol /output/sub-MTL0002/mri/orig.mgz
Projecting LH Surfs
Loading lh.white surf
GM Proj: 0 0.500000 2.000000
WM Proj: 0 0.500000 1.000000
Projecting RH Surfs
Loading rh.white surf
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.017464
 1  -25.0 -25.0  25.0   1.027684
 2  -25.0  25.0 -25.0   1.037613
 3  -25.0  25.0  25.0   1.000475
 4   25.0 -25.0 -25.0   1.019608
 5   25.0 -25.0  25.0   1.029510
 6   25.0  25.0 -25.0   1.004177
 7   25.0  25.0  25.0   1.033620
REL:  8  0.589404    8.170154  1.021269 rel = 0.577129 
Initial costs ----------------
Number of surface hits 249384
WM  Intensity   123.1402 +/-  16.5065
Ctx Intensity   129.3497 +/-  30.7512
Pct Contrast      2.5593 +/-  24.3201
Cost   0.5894
RelCost   0.5771

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.6234   0.6234  0.0
     1  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.0000      0.6201   0.6201  0.0
     3  -0.1000  -0.1000  -0.1000  -0.1000   0.0000  -0.1000      0.6170   0.6170  0.0
     4  -0.1000  -0.1000  -0.1000  -0.1000   0.0000   0.0000      0.6099   0.6099  0.0
     7  -0.1000  -0.1000  -0.1000  -0.1000   0.1000   0.0000      0.6087   0.6087  0.0
    25  -0.1000  -0.1000  -0.1000   0.1000   0.1000   0.0000      0.6081   0.6081  0.0
    85  -0.1000   0.0000  -0.1000  -0.1000   0.0000   0.0000      0.6076   0.6076  0.0
    86  -0.1000   0.0000  -0.1000  -0.1000   0.0000   0.1000      0.6024   0.6024  0.0
    89  -0.1000   0.0000  -0.1000  -0.1000   0.1000   0.1000      0.6005   0.6005  0.0
   176  -0.1000   0.1000  -0.1000   0.0000   0.0000   0.1000      0.5997   0.5997  0.0
   341   0.0000   0.0000  -0.1000   0.0000   0.1000   0.1000      0.5994   0.5994  0.0
   349   0.0000   0.0000  -0.1000   0.1000   0.1000   0.0000      0.5990   0.5990  0.0
   350   0.0000   0.0000  -0.1000   0.1000   0.1000   0.1000      0.5965   0.5965  0.0
   431   0.0000   0.1000  -0.1000   0.1000   0.1000   0.1000      0.5956   0.5956  0.0
   674   0.1000   0.1000  -0.1000   0.1000   0.1000   0.1000      0.5955   0.5955  0.0
Brute Force --------------------------
Min cost was 0.595495
Number of iterations   729
Search time 1.507805 sec
Parameters at best (transmm, rotdeg)
  0.100   0.100  -0.100  0.100  0.100  0.100 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0.1
1 0.1
2 -0.1
3 0.1
4 0.1
5 0.1
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.584665
   7  0.095  0.100 -0.100  0.100  0.100  0.100   0.5846464536
   8  0.081  0.100 -0.100  0.100  0.100  0.100   0.5846310736
  10  0.079  0.100 -0.100  0.100  0.100  0.100   0.5846297632
  14  0.070  0.100 -0.100  0.100  0.100  0.100   0.5846267778
  25  0.072  0.101 -0.100  0.100  0.100  0.100   0.5846266129
  33  0.072  0.101 -0.267  0.100  0.100  0.100   0.5831203782
  36  0.072  0.101 -0.266  0.100  0.100  0.100   0.5831200286
  45  0.072  0.101 -0.266  0.120  0.100  0.100   0.5830872930
  48  0.072  0.101 -0.266  0.131  0.100  0.100   0.5830803285
  50  0.072  0.101 -0.266  0.135  0.100  0.100   0.5830797852
  52  0.072  0.101 -0.266  0.137  0.100  0.100   0.5830796814
  60  0.072  0.101 -0.266  0.137  0.128  0.100   0.5829833343
  62  0.072  0.101 -0.266  0.137  0.129  0.100   0.5829825888
  70  0.072  0.101 -0.266  0.137  0.129  0.012   0.5829731919
  71  0.072  0.101 -0.266  0.137  0.129  0.055   0.5827215771
  72  0.072  0.101 -0.266  0.137  0.129  0.054   0.5827190430
  73  0.072  0.101 -0.266  0.137  0.129  0.048   0.5827110514
  75  0.072  0.101 -0.266  0.137  0.129  0.047   0.5827108740
  powell nthiter 1: fret = 0.582711
  84  0.070  0.101 -0.266  0.137  0.129  0.047   0.5826942244
  85  0.032  0.101 -0.266  0.137  0.129  0.047   0.5826318842
  87  0.045  0.101 -0.266  0.137  0.129  0.047   0.5826031637
  88  0.046  0.101 -0.266  0.137  0.129  0.047   0.5826026735
  89  0.047  0.101 -0.266  0.137  0.129  0.047   0.5826024693
  99  0.047  0.130 -0.266  0.137  0.129  0.047   0.5824374137
 101  0.047  0.128 -0.266  0.137  0.129  0.047   0.5824372204
 113  0.047  0.128 -0.262  0.137  0.129  0.047   0.5824338510
 114  0.047  0.128 -0.257  0.137  0.129  0.047   0.5824326236
 115  0.047  0.128 -0.258  0.137  0.129  0.047   0.5824322608
 127  0.047  0.128 -0.259  0.130  0.129  0.047   0.5824270783
 129  0.047  0.128 -0.259  0.131  0.129  0.047   0.5824269319
 130  0.047  0.128 -0.259  0.132  0.129  0.047   0.5824266876
 141  0.047  0.128 -0.259  0.132  0.118  0.047   0.5824059465
 151  0.047  0.128 -0.259  0.132  0.118  0.033   0.5823183905
 152  0.047  0.128 -0.259  0.132  0.118  0.028   0.5823147082
 153  0.047  0.128 -0.259  0.132  0.118  0.029   0.5823146029
  powell nthiter 2: fret = 0.582315
 174  0.047  0.131 -0.259  0.132  0.118  0.029   0.5823120438
 184  0.047  0.132 -0.274  0.132  0.118  0.029   0.5823058508
 185  0.047  0.132 -0.270  0.132  0.118  0.029   0.5823044804
 208  0.047  0.132 -0.269  0.132  0.109  0.029   0.5822941535
 209  0.047  0.132 -0.269  0.132  0.110  0.029   0.5822940096
 219  0.047  0.132 -0.269  0.132  0.110  0.027   0.5822927590
  powell nthiter 3: fret = 0.582293
 250  0.047  0.132 -0.277  0.132  0.110  0.027   0.5822919094
 251  0.047  0.132 -0.273  0.132  0.110  0.027   0.5822913208
 274  0.047  0.132 -0.273  0.132  0.109  0.027   0.5822909999
 296  0.047  0.132 -0.273  0.132  0.109  0.027   0.5822909616
 298  0.047  0.132 -0.273  0.132  0.109  0.027   0.5822908921
 299  0.047  0.132 -0.273  0.132  0.109  0.027   0.5822908782
 300  0.047  0.132 -0.273  0.132  0.109  0.027   0.5822908714
  powell nthiter 4: fret = 0.582291
Powell done niters = 4
Computing relative cost
 0  -25.0 -25.0 -25.0   1.017803
 1  -25.0 -25.0  25.0   1.025117
 2  -25.0  25.0 -25.0   1.038713
 3  -25.0  25.0  25.0   0.999271
 4   25.0 -25.0 -25.0   1.021827
 5   25.0 -25.0  25.0   1.029716
 6   25.0  25.0 -25.0   1.003003
 7   25.0  25.0  25.0   1.031073
REL:  8  0.582291    8.166522  1.020815 rel = 0.570417 
Number of iterations     4
Min cost was 0.582291
Number of FunctionCalls   369
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 26.890196 sec
Parameters at optimum (transmm)  0.04750  0.13186 -0.27313
Parameters at optimum (rotdeg)  0.13198  0.10935  0.02693 
Final costs ----------------
Number of surface hits 249384
WM  Intensity   123.0646 +/-  16.4476
Ctx Intensity   129.3852 +/-  30.7994
Pct Contrast      2.6233 +/-  24.4965
Cost   0.5823
RelCost   0.5771
Reg at min cost was 
-0.99960  -0.01184   0.02566  -0.69512;
 0.02451   0.08817   0.99580   10.63751;
 0.01405  -0.99604   0.08784   2.18510;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat, type = 14 
Original Reg 
-0.99961  -0.00990   0.02596  -0.74237;
 0.02501   0.08588   0.99599   10.51163;
 0.01209  -0.99626   0.08560   2.43261;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00001   0.00194   0.00030  -0.04725;
 0.00050  -0.00229   0.00019  -0.12588;
-0.00197  -0.00022  -0.00224   0.24751;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.320462
Computing change in rh position
Surface-RMS-Diff-mm 0.268980 0.082623 0.451198
mri_segreg done
MinCost: 0.582291 123.064593 129.385165 2.623284 
tkregister2_cmdl --mov /output/sub-MTL0002/mri/orig/FLAIRraw.mgz --reg /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat --noedit --ltaout /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.lta
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume /output/sub-MTL0002/mri/orig/FLAIRraw.mgz
reg file       /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.dat
LoadVol        0
ZeroCRAS       0
7.4.1
Diagnostic Level -1
---- Input registration matrix --------
-0.99960  -0.01184   0.02566  -0.69512;
 0.02451   0.08817   0.99580   10.63751;
 0.01405  -0.99604   0.08784   2.18510;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /output/sub-MTL0002/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable /output/sub-MTL0002/mri/orig/FLAIRraw.mgz
Tmov: --------------------
-1.00000   0.00000   0.00000   88.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.99960  -0.01184   0.02566  -0.69512;
 0.02451   0.08817   0.99580   10.63751;
 0.01405  -0.99604   0.08784   2.18510;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = sub-MTL0002
RegMat ---------------------------
-0.99960  -0.01184   0.02566  -0.69512;
 0.02451   0.08817   0.99580   10.63751;
 0.01405  -0.99604   0.08784   2.18510;
 0.00000   0.00000   0.00000   1.00000;
Cleaning up
 
Started at Fri Aug 2 18:46:08 EDT 2024 
Ended   at Fri Aug  2 18:47:28 EDT 2024
BBR-Run-Time-Sec 80
 
bbregister Done
To check results, run:
tkregisterfv --mov /output/sub-MTL0002/mri/orig/FLAIRraw.mgz --reg /output/sub-MTL0002/mri/transforms/FLAIRraw.auto.lta --surfs  --sd /output
